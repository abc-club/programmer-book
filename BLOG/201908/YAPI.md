## ä»€ä¹ˆæ˜¯YApi

github: https://github.com/YMFE/yapi


å®˜ç½‘ä¸Šæ˜¯è¿™ä¹ˆä»‹ç»çš„ï¼šYApi æ˜¯ä¸€ä¸ªå¯æœ¬åœ°éƒ¨ç½²çš„ã€æ‰“é€šå‰åç«¯åŠQAçš„ã€å¯è§†åŒ–çš„æ¥å£ç®¡ç†å¹³å° https://hellosean1025.github.io/yapi

å¯ä»¥è¿™ä¹ˆè¯´YApiå…¼å…·swagger,rap2,postmançš„å„é¡¹ä¼˜ç‚¹


## why YApi

å¦‚æœä½ æƒ³è¦ä¸€ä¸ªå¥½ç”¨çš„æ¥å£ç®¡ç†å¹³å°ï¼Œé‚£ä¹ˆä½ éœ€è¦YApiæˆ–swaggerã€‚YApiæ”¯æŒå„ç§æ•°æ®å¯¼å…¥ï¼Œå®ç°æ— ç¼è¿ç§»ã€‚

å¦‚æœä½ æƒ³mockæ¥å£ï¼Œé‚£ä¹ˆä½ éœ€è¦YApiæˆ–rap2ã€‚

å¦‚æœä½ æƒ³åšæ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œé‚£ä¹ˆä½ éœ€è¦YApiæˆ–postmanã€‚

å¦‚æœä½ æ‹…å¿ƒæ•°æ®æ”¾åœ¨å…¶ä»–å¹³å°ä¸å®‰å…¨ï¼Œé‚£ä¹ˆä½ ä¹Ÿéœ€è¦YApiã€‚YApiæ”¯æŒæœ¬åœ°åŒ–éƒ¨ç½²ã€‚

æ­¤å¤–ï¼ŒYApiè¿˜æœ‰å¾ˆå¤šç‰¹æ€§ã€‚

è¿™ä¹ˆä¼˜ç§€ï¼Œéš¾é“ä½ è¿˜ä¸å‡†å¤‡ç”¨å—ï¼Ÿ

## YApiæœ‰å“ªäº›åŠŸèƒ½ç‰¹æ€§

* å¯è§†åŒ–æ¥å£ç®¡ç†
* æ•°æ®mock
* è‡ªåŠ¨åŒ–æ¥å£æµ‹è¯•
* æ•°æ®å¯¼å…¥ï¼ˆå„ç§ï¼ŒåŒ…æ‹¬swaggerã€harã€postmanã€jsonã€å‘½ä»¤è¡Œï¼‰
* æƒé™ç®¡ç†
* æ”¯æŒæœ¬åœ°åŒ–éƒ¨ç½²
* æ”¯æŒæ’ä»¶
* æ”¯æŒäºŒæ¬¡å¼€å‘

## å†…ç½‘éƒ¨ç½²

å¦‚æœåªæƒ³å…ˆçœ‹çœ‹ï¼Œå¯ä»¥è·³è¿‡æ­¤èŠ‚ï¼Œç›´æ¥ä½¿ç”¨å®˜æ–¹demo http://yapi.demo.qunar.com/

è¿™é‡Œéœ€è¦æ‚¨çš„ç¯å¢ƒæ»¡è¶³

* nodejsï¼ˆ7.6+)
* mongodbï¼ˆ2.6+ï¼‰
* git

ä½¿ç”¨yapi-cli å·¥å…·ï¼Œéƒ¨ç½² YApi å¹³å°æ˜¯éå¸¸å®¹æ˜“çš„ã€‚æ‰§è¡Œ yapi server å¯åŠ¨å¯è§†åŒ–éƒ¨ç½²ç¨‹åºï¼Œè¾“å…¥ç›¸åº”çš„é…ç½®å’Œç‚¹å‡»å¼€å§‹éƒ¨ç½²ï¼Œå°±èƒ½å®Œæˆæ•´ä¸ªç½‘ç«™çš„éƒ¨ç½²ã€‚éƒ¨ç½²å®Œæˆä¹‹åï¼Œå¯æŒ‰ç…§æç¤ºä¿¡æ¯ï¼Œæ‰§è¡Œ node/{ç½‘ç«™è·¯å¾„/server/app.js} å¯åŠ¨æœåŠ¡å™¨ã€‚åœ¨æµè§ˆå™¨æ‰“å¼€æŒ‡å®šurl, ç‚¹å‡»ç™»å½•è¾“å…¥æ‚¨åˆšæ‰è®¾ç½®çš„ç®¡ç†å‘˜é‚®ç®±ï¼Œé»˜è®¤å¯†ç ä¸º ymfe.org ç™»å½•ç³»ç»Ÿï¼ˆé»˜è®¤å¯†ç å¯åœ¨ä¸ªäººä¸­å¿ƒä¿®æ”¹ï¼‰ã€‚


**ä¸æƒ³çœ‹å­—ï¼Œæ²¡å…³ç³»ï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥ä¸€ä¸‹å‘½ä»¤,æ¥ç€æŒ‰æç¤ºä¸€æ­¥æ­¥å°±å¯ä»¥äº†**



```
npm install -g yapi-cli --registry https://registry.npm.taobao.org
yapi server

```
ğŸ‘‡çœ‹æˆªå›¾


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd896a6086fead?w=1140&h=904&f=png&s=382959)

![](https://user-gold-cdn.xitu.io/2019/8/28/16cd895f43747279?w=3328&h=1750&f=png&s=252550)


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd897be9ff0fd9?w=3356&h=1980&f=png&s=899254)

æˆ‘ä»¬æŒ‰ç…§æç¤ºè¿›å…¥å®‰è£…ç›®å½•ï¼Œåæ‰§è¡Œä»¥ä¸‹å‘½ä»¤

```
node vendors/server/app.js
```

![](https://user-gold-cdn.xitu.io/2019/8/28/16cd89cf29d878a0?w=1140&h=904&f=png&s=327445)

ç„¶åæ‰“å¼€ http://localhost:3000/, å¯ä»¥çœ‹åˆ°è·Ÿå®˜æ–¹demoä¸€æ ·çš„ç•Œé¢ã€‚


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd89db9aad6624?w=3358&h=2012&f=png&s=2936884)

è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æœ¬åœ°éƒ¨ç½²å¥½æœåŠ¡é‡Œã€‚ğŸº

## å¯è§†åŒ–çš„æ¥å£ç®¡ç†

æ¥å£ç®¡ç†é¡µé¢åŒ…æ‹¬é¢„è§ˆã€ç¼–è¾‘ã€è¿è¡Œå’Œé«˜çº§mock,è¿™æ ·çœ‹æ˜¯ä¸æ˜¯å¾ˆæ¸…çˆ½ğŸ˜¬

![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8b3bd6fb164e?w=3360&h=2100&f=png&s=677100)

## æ•°æ®å¯¼å…¥

yapiæ”¯æŒswaggerã€HARã€postmanã€jsonã€å‘½ä»¤è¡Œäº”ç§å¯¼å…¥

è¿™é‡Œä»¥HARä¸ºä¾‹: æˆ‘ä»¬å…ˆæ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œç„¶åæ‰“å¼€ä¸€ä¸ªç½‘ç«™ï¼šå¦‚ ç¾å›¢å¤–å– https://h5.waimai.meituan.com/waimai/mindex/home

å¦‚å›¾ï¼šç‚¹å‡»ä¸‹è½½

![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8bceb42dc43a?w=3360&h=2100&f=png&s=1068470)

æ¥ä¸‹æ¥ï¼Œå¦‚å›¾


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8be9a1cacc84?w=3360&h=2100&f=png&s=434092)

å¯¼å…¥æˆåŠŸåï¼Œæˆ‘ä»¬å°±å¤šäº†å‡ ä¸ªæ¥å£äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆå®Œç¾ ğŸ˜


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8bf18c1b2d85?w=3360&h=2100&f=png&s=560666)


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8bf9905fa1ab?w=3360&h=2100&f=png&s=517985)


## æ•°æ®mock

yapiçš„mockåŒ…æ‹¬å¾ˆå¤šç§

### mockè¯·æ±‚å‚æ•°å’Œè¿”å›å‚æ•°


å¦‚å›¾yapiæä¾›ç»™æˆ‘ä»¬ä¸¤ç§mockå‚æ•°çš„å½¢å¼

![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8c3070d17905?w=2572&h=808&f=png&s=103728)

è¿™é‡Œæˆ‘ä»¬æŠŠimage mockæˆå›¾ç‰‡


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8c4c8260b376?w=3360&h=2100&f=png&s=472533)

ç‚¹å‡»ä¸Šå›¾é“¾æ¥


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8c51fe9d3fda?w=1106&h=402&f=png&s=36873)

è¿™é‡Œæˆ‘ä»¬æˆåŠŸmockäº†ä¸€ä¸ªæ¥å£

æƒ³æƒ³æ˜¯ä¸æ˜¯ç»å¸¸é‡åˆ°åç«¯æ¥å£æ²¡æœ‰readyçš„æƒ…å†µï¼Œç°åœ¨æœ‰äº†yapiæ˜¯ä¸æ˜¯ä¸€åˆ‡éƒ½è¿åˆƒè€Œè§£äº†å‘¢ğŸ¤”

æƒ³äº†è§£æ›´å¤šï¼Œè¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ https://hellosean1025.github.io/yapi/documents/mock.html#%E6%96%B9%E5%BC%8F1.-mockjs


### é«˜çº§mock

ç‚¹å‡»é«˜çº§mockï¼Œè¿™é‡Œæˆ‘ä»¬åŠ äº†ä¸€ä¸ªå­—æ®µ

![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8c86344b4625?w=3360&h=2100&f=png&s=466708)

ç°åœ¨æ¥è¯•è¯•çœ‹å§


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8c9404549c18?w=898&h=410&f=png&s=41233)

æ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼Ÿ

### å…¨å±€mockè„šæœ¬


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8cf87c0485ac?w=3360&h=2100&f=png&s=370585)

## è‡ªåŠ¨åŒ–æ¥å£æµ‹è¯•

è¿™é‡Œæˆ‘ä»¬ç”¨cnodeä¸ºä¾‹ï¼Œæ¥å£1ï¼š/topics  æ¥å£2ï¼š/topic/:id, å…¶ä¸­æ¥å£2ä¸­çš„idç”±æ¥å£1è¿”å›

æ·»åŠ ä¸€ä¸ªå«cnodeçš„é¡¹ç›®ï¼Œæ³¨æ„è®¾ç½®å¥½åŸŸå


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8ea013a4c948?w=3360&h=2100&f=png&s=465336)

å†å¯¼å…¥ä¸¤ä¸ªcnodeæ¥å£


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8ebce5563adf?w=3360&h=2100&f=png&s=498578)

è¿è¡Œï¼Œæ²¡æœ‰é—®é¢˜


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8ecf0bcc6255?w=3360&h=2100&f=png&s=686252)

ä¸‹é¢ğŸ‘‡æ˜¯é‡ç‚¹


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8ee757eb085a?w=3360&h=2100&f=png&s=396175)


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8ef27927b6de?w=3360&h=2100&f=png&s=430725)


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8f00ed9e8352?w=3360&h=2100&f=png&s=420636)

ä¸‹é¢å¼€å§‹å…³è”ä¸¤ä¸ªæ¥å£ï¼Œå³ä»æ¥å£1è¿”å›çš„æ•°æ®ä¸­è·å–id,å¹¶èµ‹å€¼ç»™æ¥å£2çš„å‚æ•°


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8f3632b22cbe?w=3360&h=2100&f=png&s=416677)


![](https://user-gold-cdn.xitu.io/2019/8/28/16cd8f4444c5a2e7?w=3360&h=2100&f=png&s=488570)

ç‚¹å‡»æ›´æ–°


![](https://user-gold-cdn.xitu.io/2019/8/29/16cd8f4c76680555?w=3360&h=2100&f=png&s=423552)

å¼€å§‹æµ‹è¯•æˆ–è€…æœåŠ¡ç«¯æµ‹è¯•

![](https://user-gold-cdn.xitu.io/2019/8/29/16cd8f609a2111db?w=3360&h=2100&f=png&s=450366)

çŠ¶æ€pass,æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š

![](https://user-gold-cdn.xitu.io/2019/8/29/16cd8f6f9a4194ba?w=3360&h=2100&f=png&s=439266)

![](https://user-gold-cdn.xitu.io/2019/8/29/16cd8f79d04237ee?w=3360&h=2100&f=png&s=392757)



ä»Šå¤©å°±ä»‹ç»åˆ°è¿™é‡Œã€‚


æ›´å¤šæ–‡ç« è¯·å…³æ³¨ https://github.com/abc-club/js-paradise

å–œæ¬¢è¯·star

å–œæ¬¢è¯·star

å–œæ¬¢è¯·star
